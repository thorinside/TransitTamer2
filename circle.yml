#
# Build configuration for Circle CI
#
# See this thread for speeding up and caching directories: https://discuss.circleci.com/t/installing-android-build-tools-23-0-2/924
#

dependencies:
    pre:
        - mkdir -p "$ANDROID_HOME/licenses" || true
        - echo -e "\n8933bad161af4178b1185d1a37fbf41ea5269c55" > "$ANDROID_HOME/licenses/android-sdk-license"
        - echo -e "\n84831b9409646a918e30573bab4c9c91346d8abd" > "$ANDROID_HOME/licenses/android-sdk-preview-license"
    cache_directories:
        - /usr/local/android-sdk-linux
    override:
        - ./gradlew dependencies || true

test:
    override:
        - ./gradlew assembleDebug
        - cp -r mobile/build/outputs $CIRCLE_ARTIFACTS
